# Как работать через GITHUB?

## Ветки

### Какие у нас ветки?

#### main (master)

Системная ветка, в ней будет только стабильный код, то есть, готовый для билда. Более того, прямые коммиты в эту ветку запрещены. Остальным участникам про эту ветку, по сути, можно забыть, так как слияние других веток в main будет осуществлять тимлид.

#### develop

Наша основная ветка, тут будет самый свежий код, но он может работать нестабильно. Прямые коммиты в эту ветку нежелательны, лучше создавать отдельную ветку и потом делать pull-request в develop. При создании новой ветки, следует выбрать какой-то из предложенных типов:

- [fix/](#fix/)
- [feature/](#feature/)
- [Остальные ветки](#Остальные-ветки)

#### fix/

Ветки, с названиями по формату `fix/название-ветки`. Их целью будет исправить какую-то ошибку, баг или несовместимость, иными словами, они не добавляют нового функционала, а исправляют старый. Соответственно, вместо `название-ветки` стоит указать исправляемую ошибку (на английском, например, `fix/stuck-in-wall`). Когда ошибка была исправлена, следует сделать pull-request в [develop](#develop).

#### feature/

Ветки, с названиями по формату `feature/название-ветки`. Их целью является добавление нового функционала: новое главное меню, новая механика, какой-нибудь визуальный эффект и тому подобное. Вместо `название-ветки` следует указать добавляемую механику (на английском, например, `feature/parriable-bullets`). После реализации поставленной задачи следует сделать pull-request в [develop](#develop).

#### Остальные ветки

Такие случаи будут крайне редкими, но, иногда надо будет внести какие-то изменения, которые не касаются ни исправления багов, ни добавления нового функционала. В таком случае название ветки стоит создавать в формате `название-ветки` (на английском, например, `update-design-document`). Соответственно, после осуществления поставленной задачи следует сделать pull-request в [develop](#develop).

### Как переключить ветку?

Чтобы переключиться на нужную ветку, в приложении `GitHub Desktop` надо нажать по текущей ветке (`Current branch`):

![helper_choose_branch1](./img/helper_choose_branch1.png)

После чего из списка веток выбрать нужную:

![helper_choose_branch2](./img/helper_choose_branch2.png)

Когда нужная ветка была выбрана, то её название появится под `Current branch` сверху (см. первый скрин). Соответсвенно, все коммиты будут создаваться именно в этой ветке.

### Как создать ветку?

В большинстве случаев я (тимлид) буду самостоятельно создавать вам нужные ветки, так что вам нужно будет просто [переключиться на них](#Как-переключить-ветку?). Если такого не произошло или вы решили проявить инициативу и протестить что-то самостоятельно, то тогда можете самостоятельно сделать новую ветку.

Для начала, нужно открыть список веток, кликнув по `Current branch`:

![helper_choose_branch1](./img/helper_choose_branch1.png)

После этого необходимо нажать `new branch`:

![helper-create-branch1](./img/helper-create-branch1.png)

И в новом окне указать название ветки (1) и выбрать ветку `develop` (2) как основную, поскольку именно в ней самый свежий код. В конце нужно нажать `Create branch`. Если возникли вопросы по тому, как составить название ветки, то посмотрите раздел ["Какие у нас ветки?"](#Какие-у-нас-ветки?), там в описаниях типов веток есть указания по их названиям.

![helper-create-branch2](./img/helper-create-branch2.png)

## Коммиты

### Суть коммитов

Каждый коммит является небольшим сохранением новых изменений. Коммиты должны быть небольшими и решать какую-то небольшую цель. Иными словами, коммиты надо делать такими, чтобы в будущем ошибочные изменения можно было отменить, не задев при этом полезные изменения. 

Например, добавление спрайта персонажа, исправление бага в атаке и добавление нового уровня в одном коммите – очень плохое решение. Более того, в самом изложении этого "коммита" он делится на 3 логические части, то есть, спрайт, баг-фикс и новый уровень нужно зафиксировать по отдельным коммитам.

### Как выбрать файлы и строки для коммита?

Если вы своевременно делаете коммиты по мере работы, то эта инструкция, в большинстве случаев, вам не пригодиться. Но если вы сразу сделали несколько разных изменений и теперь хотите разделить их по разным коммитам, то читайте далее.

Во-первых, все новые или изменённые файлы отображаются в левом списке. Более того, все эти изменения выбраны по-умолчанию:

![helper_choose_changes1](./img/helper_choose_changes1.png)

Нажимая на чек-боксы слева от названий файлов (верхняя картинка), можно убрать или добавить файлы в предстоящий коммит.

Помимо выбора файлов, можно выбрать ещё сами строки внутри файлов. Для этого нужно кликнуть по нужному файлу и воспользоваться центральной частью приложения:

![helper_choose_changes2](./img/helper_choose_changes2.png)

Например, представим, что файл1 и файл2 носят какое-то исправление бага, при этом в файле1 ещё есть дополнительное исправление, которое к этому багу не имеет отношение. Более того, ещё есть картинка, которая вообще с багами никак не связана, так что для нового коммита нужно убрать картинку и ненужную строку в файле, что будет выглядеть следующим образом:

![helper_choose_changes3](./img/helper_choose_changes3.png)

### Как создать коммит?

После [выбора нужных файлов](#Как-выбрать-файлы-и-строки-для-коммита?), можно приступить к созданию самого коммита. Самое главное – это указать название коммита (1) на русском языке, без заголовка создание коммита невозможно. Название коммита должно быть кратким: в среднем случае 3-4 слова, редко достигает 5 слов, к тому же само приложение высветит предупреждение, если длина названия превысит 50 символов. Также название коммита должно быть ответом на вопрос "Что я сделал?" и начинаться с глагола в прошедшем времени.

Если суть коммита не получается уложить в названии, то заголовок можно сделать сосвсем обобщённым, например "добавил картинку", после чего в описании (2) указать подробности, что это за картинка. Описание не обязательно и для сосвсем мелких коммитов, обычно, не имеет смысла.

После указания названия и описания (если нужно), следует нажать кнопку `Commit to ...` (3), чтобы добавить коммит в выбранную ветку. Выбор нужной ветки смотри [тут](#Как-переключить-ветку?).

![helper_create_commit](./img/helper_create_commit.png)

## Issues

Хотя issues, по сути, считаются проблемами, их так же можно использовать как и задачи. Вообще, сами проблемы (например, баги) являются задачами, которые нужно разрешить, поэтому не вижу проблем в том, чтобы обычные задачи на реализацию чего-либо тоже добавлять в Issues. 

### Как их создавать?

1. Перейти во вкладку "Issues" и кликнуть "new issue"
2. Заголовок – краткое описание сути сообщения, например "Баг при подборе предметов" или "Предложение добавить механику смены оружия".
3. Чётко описать суть сообщения: какой-то баг, неисправность, кривая формулировка в диздоке, предложение добавить новую механику и тому подобное. В случае с багом, желательно, ещё указать действия, ведущие к нему.
4. Поставить соответствующие теги. У вас вроде должна быть возможность ставить их.

### Теги

Нужны для того, чтобы issue можно было сортировать по разным смыслам. Тегам попытался дать понятные названия и описания, так что, думаю, больших проблем возникнуть не должно.

### Issue как задачи

К каждому issue можно прикрепить одного человека, так что issues будем использовать как задачи. Но тогда нужно учитывать следующие нюансы:

1. В pull request или коммите в заголовке надо указывать номер issue, который данный коммит или pull request решает (в конце заголовка написать #номер_issue).
2. Если issue автоматически не закрылся, то надо добавить в него сообщение по типу "Исправил это в коммите <код коммита>" и закрыть вручную. Код коммита (или pull request'а) можно посмотреть через github или github desktop (большая строка из букв и цифр).

Вроде всё.
